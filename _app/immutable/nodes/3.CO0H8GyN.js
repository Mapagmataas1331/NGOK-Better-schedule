import{s as Y,i as H,a as d,t as q,c as Z,b as B,d as u,e as I}from"../chunks/disclose-version.dS-yRulu.js";import{i as ee,e as z,B as T,a as G,s as te,l as ae}from"../chunks/button.CQh0_QZR.js";import{p as se,a as re,f as y,s as v,t as _,g as t,m as J,b as K,c as f,n as F,r as m,d as le}from"../chunks/utils.BSb6bQwc.js";import{f as oe,c as ne,b as ce}from"../chunks/fetchTableData.JhWmgOXU.js";var ie=q('<div class="mb-4 w-full min-w-[256px] p-4 md:w-2/3 lg:w-1/2 2xl:w-1/3"><h2 class="mb-4 text-center text-2xl font-semibold"> </h2> <p class="mb-1 text-lg"> </p> <blockquote class="mb-1 italic"> </blockquote> <blockquote class="italic"> </blockquote></div> <!>',1),de=q('<p class="w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3" lang="ru" spellcheck="" contenteditable=""> </p> <div class="mb-2 grid w-full min-w-[256px] grid-cols-3 border-l-2 md:w-2/3 md:grid-cols-6 lg:w-1/2 2xl:w-1/3"></div>',1),ue=q("<!> <!>",1),me=q('<div class="mx-auto flex min-h-[calc(100dvh_-_3.5rem)] w-full flex-col items-center justify-center bg-gradient-to-br from-white to-sky-200 px-2 py-2 dark:from-sky-800 dark:to-black md:min-h-[calc(100dvh_-_4rem)]"><!></div>');function be(M,N){se(N,!1);const Q=Y(),g=()=>I(ae,"$language",Q),E={},w={},h=J({}),x=J({}),R=async()=>{for(let e=1;e<=4;(e+=1)-1){const a=await oe(String(e));if(a.scheduleError||!a.schedule)return;E[e]=a.schedule}Object.entries(E).forEach(([e,a])=>{a[1].forEach((s,o)=>{s.toLowerCase()==="преподаватели"&&(w[e]||(w[e]=[]),w[e].push(o))})}),Object.entries(E).forEach(([e,a])=>{a.forEach((s,o)=>{w[e].forEach(l=>{s[l]&&(t(h)[s[l]]||K(h,t(h)[s[l]]=[]),t(h)[s[l]].push({year:e,col:l,row:o}))})})})};ee();var j=me(),U=f(j);H(U,()=>!(Object.keys(t(h)).length>0),e=>{var a=ie(),s=y(a),o=f(s),l=f(o,!0);m(o);var r=v(o,2),O=f(r,!0);m(r);var p=v(r,2),k=f(p,!0);m(p);var $=v(p,2),c=f($,!0);m($),m(s);var i=v(s,2);T(i,{variant:"outline",class:"my-1 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:async()=>{await R()},children:(n,L)=>{F();var b=B();_(()=>u(b,g()==="ru"?"Сканировать":"Fetch")),d(n,b)},$$slots:{default:!0}}),_(()=>{u(l,g()==="ru"?"Эта страница нужна для просмотра всех имен преподавателей и их упоминаний в расписании.":"This page is needed to view all teacher names and their mentions in the schedule."),u(O,g()==="ru"?"После сканирования будет доступен список преподавателей, при нажатии на них будет открыт список их упоминаний, а по нажатию на упоминания будет открыта новая вкладка с таблицей рассписания на нужной ячейки.":"After scanning, a list of teachers will be available, and clicking on them will open a list of their mentions, and clicking on mentions will open a new tab with tables of schedules on the necessary cells."),u(k,g()==="ru"?"Просьба не злоупотреблять сканированием, поскольку на 1 сканирование тратяться 4 api запроса, и если вы оказались здесь случаенно - покинуть страницу и сделать вид что ничего не было.":"Please do not abuse scanning, as 1 scan consumes 4 api requests, and if you happen to be here by chance - leave the page and make it look like nothing happened."),u(c,g()==="ru"?"Для повторного сканирования - перезагрузите страницу.":"For a repeated scan - reload the page.")}),d(e,a)},e=>{var a=Z(),s=y(a);z(s,1,()=>Object.entries(t(h)).sort(),G,(o,l)=>{let r=()=>t(l)[0],O=()=>t(l)[1];var p=ue(),k=y(p);T(k,{variant:"outline",class:"mb-0.5 w-full min-w-[256px] font-semibold md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:()=>{K(x,t(x)[r()]=!t(x)[r()]),setTimeout(()=>{var c,i;(c=document.getElementById(r()))==null||c.focus(),(i=document.getElementById(r()))==null||i.blur()},250)},children:(c,i)=>{F();var n=B();_(()=>u(n,r().replace(/\ /g,"_"))),d(c,n)},$$slots:{default:!0}});var $=v(k,2);H($,()=>t(x)[r()],c=>{var i=de(),n=y(i),L=f(n,!0);m(n);var b=v(n,2);z(b,5,O,G,(V,P)=>{let S=()=>t(P).year,A=()=>t(P).col,C=()=>t(P).row;var W=le(()=>ce(S(),C()+1,A()+1));T(V,{variant:"ghost",target:"_blank",get href(){return t(W)},children:(X,fe)=>{F();var D=B();_(()=>u(D,`${S()??""}-${ne(A()+1)??""}/${C()+1}`)),d(X,D)},$$slots:{default:!0}})}),m(b),_(()=>{te(n,"id",r()),u(L,r())}),d(c,i)}),d(o,p)}),d(e,a)}),m(j),d(M,j),re()}export{be as component};
