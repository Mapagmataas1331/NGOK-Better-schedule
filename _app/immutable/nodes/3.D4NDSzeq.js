import{p as ie,b as we,a as n,t as y,r as _e,s as xe,c as R,i as ee,d as z,e as G,f as ce,g as d,h as $e}from"../chunks/disclose-version.D1fEuhDt.js";import{p as ue,t as k,b as de,f as x,c as m,g as e,d as B,e as J,h as $,i as K,j as v,k as te}from"../chunks/utils.G3MfLldh.js";import{r as ke,s as ye,c as Se,e as ae,B as le,i as se,a as Pe,l as Ee}from"../chunks/language.DHuydBBX.js";import{b as qe,R as je,S as Ce,a as Be,c as Le}from"../chunks/index.BJ6bSosv.js";import{S as Oe,f as Te,c as Fe,b as Re}from"../chunks/fetchTableData.k8OCiieG.js";var We=y("<input>");function Ae(N,b){ue(b,!0);let W=ie(b,"ref",15,null),f=ie(b,"value",15),L=_e(b,["$$slots","$$events","$$legacy","ref","value","class"]);var u=We();ke(u);let O;we(u,w=>W(w),()=>W()),k(()=>O=ye(u,O,{class:Se("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",b.class),...L})),qe(u,f),n(N,u),de()}var De=y("<!> <!>",1),He=y('<div class="mb-4 w-full min-w-[256px] p-4 md:w-2/3 lg:w-1/2 2xl:w-1/3"><h2 class="mb-4 text-center text-lg font-semibold md:text-2xl"> </h2> <p class="mb-1 text-sm md:text-lg"> </p> <blockquote class="mb-1 text-sm italic md:text-lg"> </blockquote> <blockquote class="text-sm italic md:text-lg"> </blockquote></div> <!> <!>',1),Me=y('<p class="w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3" lang="ru" spellcheck="" contenteditable=""> </p> <div class="mb-2 grid w-full min-w-[256px] grid-cols-3 border-l-2 md:w-2/3 md:grid-cols-6 lg:w-1/2 2xl:w-1/3"></div>',1),Qe=y("<!> <!>",1),ze=y('<div class="mb-10 flex w-full flex-col items-center"></div> <!>',1),Ge=y('<div class="mx-auto flex min-h-[calc(100dvh_-_3.5rem)] w-full flex-col items-center justify-center bg-gradient-to-br from-white to-sky-200 px-2 py-2 dark:from-sky-800 dark:to-black md:min-h-[calc(100dvh_-_4rem)]"><!></div>');function Xe(N,b){ue(b,!0);const W=xe(),f=()=>$e(Ee,"$language",W),L={};let u=J(""),O=J(null);const w=R({}),U=R({});let V=J("");const X=[{value:"дни",label:"Дни"},{value:"часы",label:"Часы"},{value:"дисциплины",label:"Дисциплины"},{value:"преподаватели",label:"Преподаватели"},{value:"ауд.",label:"Ауд"}];let p=J("преподаватели");const me=te(()=>{var r;return((r=X.find(t=>t.value===e(p)))==null?void 0:r.label)??"Select a fruit"}),re=[];re.push(...X.map(r=>r.value));const ve=async()=>{B(u,"loading");const r={};for(let t=1;t<=4;(t+=1)-1){const l=await Te(String(t));if(B(O,R(l.scheduleError?l.scheduleError+" in year "+t:null)),e(O)||!l.schedule){B(u,"error");return}L[t]=l.schedule}Object.entries(L).forEach(([t,l])=>{l[1].forEach((o,g)=>{o.toLowerCase()===e(p)&&(r[t]||(r[t]=[]),r[t].push(g))})}),Object.entries(L).forEach(([t,l])=>{l.forEach((o,g)=>{r[t].forEach(a=>{g!=0&&o[a]&&!re.includes(o[a].toLowerCase())&&(w[o[a]]||(w[o[a]]=[]),w[o[a]].push({year:t,col:a,row:g}))})})}),B(u,"visible")};var Y=Ge(),fe=$(Y);ee(fe,()=>!(Object.keys(w).length>0),r=>{var t=He(),l=x(t),o=$(l),g=$(o,!0);v(o);var a=m(o,2),_=$(a,!0);v(a);var s=m(a,2),Z=$(s,!0);v(s);var T=m(s,2),A=$(T,!0);v(T),v(l);var D=m(l,2);z(D,()=>je,(i,c)=>{c(i,{type:"single",name:"groupSelect",get value(){return e(p)},set value(S){B(p,R(S))},children:(S,P)=>{var H=De(),E=x(H);z(E,()=>Ce,(q,j)=>{j(q,{class:"my-1 w-full min-w-[256px] bg-background shadow-md md:w-2/3 lg:w-1/2 2xl:w-1/3",children:(F,I)=>{K();var C=G();k(()=>d(C,e(me))),n(F,C)},$$slots:{default:!0}})});var M=m(E,2);z(M,()=>Be,(q,j)=>{j(q,{class:"max-h-[256px] overflow-y-auto",children:(F,I)=>{var C=ce(),Q=x(C);ae(Q,17,()=>X,se,(pe,oe)=>{var ne=ce(),ge=x(ne);z(ge,()=>Le,(he,be)=>{be(he,{get value(){return e(oe).value},get label(){return e(oe).label}})}),n(pe,ne)}),n(F,C)},$$slots:{default:!0}})}),n(S,H)},$$slots:{default:!0}})});var h=m(D,2);ee(h,()=>e(u)==="loading",i=>{Oe(i,{class:"my-1 h-8 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3"})},i=>{le(i,{variant:"outline",class:"my-1 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:async()=>await ve(),children:(c,S)=>{K();var P=G();k(()=>d(P,f()==="ru"?"Сканировать":"Fetch")),n(c,P)},$$slots:{default:!0}})}),k(()=>{d(g,f()==="ru"?`Эта страница нужна для просмотра всех "${e(p)}" и их упоминаний в расписании.`:`This page is needed to view all "${e(p)}" and their mentions in the schedule.`),d(_,f()==="ru"?`После сканирования будет доступен список всех "${e(p)}", при нажатии на них будет открыт список их упоминаний, а по нажатию на упоминания будет открыта новая вкладка с таблицей рассписания на нужной ячейки.`:`After scanning, a list of all "${e(p)}" will be available, and clicking on them will open a list of their mentions, and clicking on mentions will open a new tab with tables of schedules on the necessary cells.`),d(Z,f()==="ru"?"Просьба не злоупотреблять сканированием, поскольку на 1 сканирование уходят 4 api запроса, и если вы оказались здесь случайно - просьба покинуть страницу и сделать вид что ничего не было.":"Please do not abuse scanning, as 1 scan consumes 4 api requests, and if you happen to be here by chance - leave the page and make it look like nothing happened."),d(A,f()==="ru"?"Для повторного сканирования - перезагрузите страницу.":"For a repeated scan - reload the page.")}),n(r,t)},r=>{var t=ze(),l=x(t);ae(l,21,()=>Object.entries(w).filter(([a,_])=>a.toLowerCase().split(" ").some(s=>s.startsWith(e(V).toLowerCase()))).sort((a,_)=>a[0].localeCompare(_[0])),se,(a,_)=>{let s=()=>e(_)[0],Z=()=>e(_)[1];var T=Qe(),A=x(T);le(A,{variant:"outline",class:"mb-0.5 w-full min-w-[256px] font-semibold md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:()=>{U[s()]=!U[s()],setTimeout(()=>{var h,i;(h=document.getElementById(s()))==null||h.focus(),(i=document.getElementById(s()))==null||i.blur()},250)},children:(h,i)=>{K();var c=G();k(()=>d(c,s().replace(/\ /g,"_"))),n(h,c)},$$slots:{default:!0}});var D=m(A,2);ee(D,()=>U[s()],h=>{var i=Me(),c=x(i),S=$(c,!0);v(c);var P=m(c,2);ae(P,21,Z,se,(H,E)=>{let M=()=>e(E).year,q=()=>e(E).col,j=()=>e(E).row;var F=te(()=>Re(M(),j()+1,q()+1));le(H,{variant:"ghost",target:"_blank",get href(){return e(F)},children:(I,C)=>{K();var Q=G();k(()=>d(Q,`${M()??""}-${Fe(q()+1)??""}/${j()+1}`)),n(I,Q)},$$slots:{default:!0}})}),v(P),k(()=>{Pe(c,"id",s()),d(S,s())}),n(h,i)}),n(a,T)}),v(l);var o=m(l,2),g=te(()=>f()==="ru"?"Поиск (По одному из слов содержащихся в имени)":"Search (By one of the words contained in the name)");Ae(o,{type:"text",get placeholder(){return e(g)},class:"fixed bottom-14 w-full min-w-[256px] bg-muted p-4 shadow-2xl md:w-2/3 lg:w-1/2 2xl:w-1/3",get value(){return e(V)},set value(a){B(V,R(a))}}),n(r,t)}),v(Y),n(N,Y),de()}export{Xe as component};
