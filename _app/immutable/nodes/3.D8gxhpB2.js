import{p as ce,b as $e,a as i,t as P,r as ye,d as Se,e as A,i as ee,f as z,g as G,c as ue,h as d,j as Pe}from"../chunks/disclose-version.CpdznXbB.js";import{p as de,t as S,b as me,c as $,f as y,d as m,e as v,g as e,i as q,j as J,k as K,l as te}from"../chunks/index-client.BJSJo82y.js";import{r as Ee,a as je,c as qe,e as ae,b as le,B as se,d as Ce,l as Be}from"../chunks/language.D5rYJVNv.js";import{b as Le,S as Oe,a as Te,c as Fe,R as Re}from"../chunks/index.DTycqQVZ.js";import{S as We,c as Ae,f as De,b as He}from"../chunks/fetchTableData.CPc8_iJS.js";var Me=P("<input>");function Qe(N,w){de(w,!0);let D=ce(w,"ref",15,null),f=ce(w,"value",15),C=ye(w,["$$slots","$$events","$$legacy","ref","value","class"]);var c=Me();Ee(c);let B;$e(c,_=>D(_),()=>D()),S(()=>B=je(c,B,{class:qe("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",w.class),...C})),Le(c,f),i(N,c),me()}var ze=P("<!> <!>",1),Ge=P('<div class="mb-4 w-full min-w-[256px] p-4 md:w-2/3 lg:w-1/2 2xl:w-1/3"><h2 class="mb-4 text-center text-lg font-semibold md:text-2xl"> </h2> <p class="mb-1 text-sm md:text-lg"> </p> <blockquote class="mb-1 text-sm italic md:text-lg"> </blockquote> <blockquote class="text-sm italic md:text-lg"> </blockquote></div> <!> <!>',1),Je=P('<p class="w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3" lang="ru" spellcheck="" contenteditable=""> </p> <div class="mb-2 grid w-full min-w-[256px] grid-cols-3 border-l-2 md:w-2/3 md:grid-cols-6 lg:w-1/2 2xl:w-1/3"></div>',1),Ke=P("<!> <!>",1),Ne=P('<div class="mb-10 flex w-full flex-col items-center"></div> <!>',1),Ue=P('<div class="mx-auto flex min-h-[calc(100dvh_-_3.5rem)] w-full flex-col items-center justify-center bg-gradient-to-br from-white to-sky-200 px-2 py-2 dark:from-sky-800 dark:to-black md:min-h-[calc(100dvh_-_4rem)]"><!></div>');function et(N,w){de(w,!0);const D=Se(),f=()=>Pe(Be,"$language",D),C={};let c=K(""),B=K(null);const _=A({}),U=A({});let V=K("");const X=[{value:"дни",label:"Дни"},{value:"часы",label:"Часы"},{value:"дисциплины",label:"Дисциплины"},{value:"преподаватели",label:"Преподаватели"},{value:"ауд.",label:"Ауд"}];let p=K("преподаватели");const ve=te(()=>{var l;return((l=X.find(t=>t.value===e(p)))==null?void 0:l.label)??"Select a fruit"}),re=[];re.push(...X.map(l=>l.value));const fe=async()=>{q(c,"loading");const l={};for(let t=1;t<=4;t++){const s=await De(String(t));if(q(B,A(s.scheduleError?s.scheduleError+" in year "+t:null)),e(B)||!s.schedule){q(c,"error");return}C[t]=s.schedule}Object.entries(C).forEach(([t,s])=>{s[1].forEach((n,g)=>{n.toLowerCase()===e(p)&&(l[t]||(l[t]=[]),l[t].push(g))})}),Object.entries(C).forEach(([t,s])=>{s.forEach((n,g)=>{l[t].forEach(a=>{g!=0&&n[a]&&!re.includes(n[a].toLowerCase())&&(_[n[a]]||(_[n[a]]=[]),_[n[a]].push({year:t,col:a,row:g}))})})}),q(c,"visible")};var Y=Ue(),pe=$(Y);{var ge=l=>{var t=Ge(),s=y(t),n=$(s),g=$(n,!0);m(n);var a=v(n,2),x=$(a,!0);m(a);var o=v(a,2),Z=$(o,!0);m(o);var L=v(o,2),H=$(L,!0);m(L),m(s);var M=v(s,2);z(M,()=>Re,(r,O)=>{O(r,{type:"single",name:"groupSelect",get value(){return e(p)},set value(k){q(p,A(k))},children:(k,T)=>{var E=ze(),F=y(E);z(F,()=>Oe,(j,R)=>{R(j,{class:"my-1 w-full min-w-[256px] bg-background shadow-md md:w-2/3 lg:w-1/2 2xl:w-1/3",children:(W,oe)=>{J();var b=G();S(()=>d(b,e(ve))),i(W,b)},$$slots:{default:!0}})});var Q=v(F,2);z(Q,()=>Te,(j,R)=>{R(j,{class:"max-h-[256px] overflow-y-auto",children:(W,oe)=>{var b=ue(),be=y(b);ae(be,17,()=>X,le,(we,ne)=>{var ie=ue(),_e=y(ie);z(_e,()=>Fe,(xe,ke)=>{ke(xe,{get value(){return e(ne).value},get label(){return e(ne).label}})}),i(we,ie)}),i(W,b)},$$slots:{default:!0}})}),i(k,E)},$$slots:{default:!0}})});var I=v(M,2);{var u=r=>{We(r,{class:"my-1 h-8 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3"})},h=r=>{se(r,{variant:"outline",class:"my-1 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:async()=>await fe(),children:(O,k)=>{J();var T=G();S(()=>d(T,f()==="ru"?"Сканировать":"Fetch")),i(O,T)},$$slots:{default:!0}})};ee(I,r=>{e(c)==="loading"?r(u):r(h,!1)})}S(()=>{d(g,f()==="ru"?`Эта страница нужна для просмотра всех "${e(p)}" и их упоминаний в расписании.`:`This page is needed to view all "${e(p)}" and their mentions in the schedule.`),d(x,f()==="ru"?`После сканирования будет доступен список всех "${e(p)}", при нажатии на них будет открыт список их упоминаний, а по нажатию на упоминания будет открыта новая вкладка с таблицей рассписания на нужной ячейки.`:`After scanning, a list of all "${e(p)}" will be available, and clicking on them will open a list of their mentions, and clicking on mentions will open a new tab with tables of schedules on the necessary cells.`),d(Z,f()==="ru"?"Просьба не злоупотреблять сканированием, поскольку на 1 сканирование уходят 4 api запроса, и если вы оказались здесь случайно - просьба покинуть страницу и сделать вид что ничего не было.":"Please do not abuse scanning, as 1 scan consumes 4 api requests, and if you happen to be here by chance - leave the page and make it look like nothing happened."),d(H,f()==="ru"?"Для повторного сканирования - перезагрузите страницу.":"For a repeated scan - reload the page.")}),i(l,t)},he=l=>{var t=Ne(),s=y(t);ae(s,21,()=>Object.entries(_).filter(([a,x])=>a.toLowerCase().split(" ").some(o=>o.startsWith(e(V).toLowerCase()))).sort((a,x)=>a[0].localeCompare(x[0])),le,(a,x)=>{let o=()=>e(x)[0],Z=()=>e(x)[1];var L=Ke(),H=y(L);se(H,{variant:"outline",class:"mb-0.5 w-full min-w-[256px] font-semibold md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:()=>{U[o()]=!U[o()],setTimeout(()=>{var u,h;(u=document.getElementById(o()))==null||u.focus(),(h=document.getElementById(o()))==null||h.blur()},250)},children:(u,h)=>{J();var r=G();S(()=>d(r,o().replace(/\ /g,"_"))),i(u,r)},$$slots:{default:!0}});var M=v(H,2);{var I=u=>{var h=Je(),r=y(h),O=$(r,!0);m(r);var k=v(r,2);ae(k,21,Z,le,(T,E)=>{let F=()=>e(E).year,Q=()=>e(E).col,j=()=>e(E).row;var R=te(()=>He(F(),j()+1,Q()+1));se(T,{variant:"ghost",target:"_blank",get href(){return e(R)},children:(W,oe)=>{J();var b=G();S(()=>d(b,`${F()??""}-${Ae(Q()+1)??""}/${j()+1}`)),i(W,b)},$$slots:{default:!0}})}),m(k),S(()=>{Ce(r,"id",o()),d(O,o())}),i(u,h)};ee(M,u=>{U[o()]&&u(I)})}i(a,L)}),m(s);var n=v(s,2),g=te(()=>f()==="ru"?"Поиск (По одному из слов содержащихся в имени)":"Search (By one of the words contained in the name)");Qe(n,{type:"text",get placeholder(){return e(g)},class:"fixed bottom-14 w-full min-w-[256px] bg-muted p-4 shadow-2xl md:w-2/3 lg:w-1/2 2xl:w-1/3",get value(){return e(V)},set value(a){q(V,A(a))}}),i(l,t)};ee(pe,l=>{Object.keys(_).length>0?l(he,!1):l(ge)})}m(Y),i(N,Y),me()}export{et as component};
