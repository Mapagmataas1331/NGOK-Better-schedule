import{p as de,b as ye,a as i,t as E,r as Se,d as A,i as ae,e as Pe,f as z,g as G,c as me,h as d,j as Ee}from"../chunks/Cj9c95v1.js";import{p as fe,t as P,a as ve,c as y,f as S,r as m,s as f,g as e,b as B,n as J,d as K,e as le}from"../chunks/CZbEYaIK.js";import{r as qe,a as je,b as Ce,e as se,i as re,B as oe,l as Be,d as Le}from"../chunks/CGg4dAkU.js";import{b as Oe,S as Te,a as Fe,R as Re,c as We}from"../chunks/CiwZVYeg.js";import{S as Ae,f as De,c as He,b as Me}from"../chunks/CtRk4yGp.js";var Qe=E("<input>");function ze(N,w){fe(w,!0);let D=de(w,"ref",15,null),U=de(w,"value",15),v=Se(w,["$$slots","$$events","$$legacy","ref","value","class"]);var u=Qe();qe(u);let _;ye(u,q=>D(q),()=>D()),P(q=>_=Ce(u,_,{class:q,...v}),[()=>je("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",w.class)]),Oe(u,U),i(N,u),ve()}var Ge=E("<!> <!>",1),Je=E('<div class="mb-4 w-full min-w-[256px] p-4 md:w-2/3 lg:w-1/2 2xl:w-1/3"><h2 class="mb-4 text-center text-lg font-semibold md:text-2xl"> </h2> <p class="mb-1 text-sm md:text-lg"> </p> <blockquote class="mb-1 text-sm italic md:text-lg"> </blockquote> <blockquote class="text-sm italic md:text-lg"> </blockquote></div> <!> <!>',1),Ke=E('<p class="w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3" lang="ru" spellcheck="" contenteditable=""> </p> <div class="mb-2 grid w-full min-w-[256px] grid-cols-3 border-l-2 md:w-2/3 md:grid-cols-6 lg:w-1/2 2xl:w-1/3"></div>',1),Ne=E("<!> <!>",1),Ue=E('<div class="mb-10 flex w-full flex-col items-center"></div> <!>',1),Ve=E('<div class="mx-auto flex min-h-[calc(100dvh_-_3.5rem)] w-full flex-col items-center justify-center bg-gradient-to-br from-white to-sky-200 px-2 py-2 dark:from-sky-800 dark:to-black md:min-h-[calc(100dvh_-_4rem)]"><!></div>');function tt(N,w){fe(w,!0);const[D,U]=Pe(),v=()=>Ee(Be,"$language",D),u={};let _=K(""),q=K(null);const L=A({}),V=A({});let X=K("");const Y=[{value:"дни",label:"Дни"},{value:"часы",label:"Часы"},{value:"дисциплины",label:"Дисциплины"},{value:"преподаватели",label:"Преподаватели"},{value:"ауд.",label:"Ауд"}];let p=K("преподаватели");const pe=le(()=>{var l;return((l=Y.find(t=>t.value===e(p)))==null?void 0:l.label)??"Select a fruit"}),ne=[];ne.push(...Y.map(l=>l.value));const ge=async()=>{B(_,"loading");const l={};for(let t=1;t<=4;t++){const s=await De(String(t));if(B(q,A(s.scheduleError?s.scheduleError+" in year "+t:null)),e(q)||!s.schedule){B(_,"error");return}u[t]=s.schedule}Object.entries(u).forEach(([t,s])=>{s[1].forEach((n,g)=>{n.toLowerCase()===e(p)&&(l[t]||(l[t]=[]),l[t].push(g))})}),Object.entries(u).forEach(([t,s])=>{s.forEach((n,g)=>{l[t].forEach(a=>{g!=0&&n[a]&&!ne.includes(n[a].toLowerCase())&&(L[n[a]]||(L[n[a]]=[]),L[n[a]].push({year:t,col:a,row:g}))})})}),B(_,"visible")};var Z=Ve(),he=y(Z);{var be=l=>{var t=Je(),s=S(t),n=y(s),g=y(n,!0);m(n);var a=f(n,2),x=y(a,!0);m(a);var o=f(a,2),I=y(o,!0);m(o);var O=f(o,2),H=y(O,!0);m(O),m(s);var M=f(s,2);z(M,()=>Re,(r,$)=>{$(r,{type:"single",name:"groupSelect",get value(){return e(p)},set value(k){B(p,A(k))},children:(k,T)=>{var j=Ge(),F=S(j);z(F,()=>Te,(C,R)=>{R(C,{class:"my-1 w-full min-w-[256px] bg-background shadow-md md:w-2/3 lg:w-1/2 2xl:w-1/3",children:(W,ie)=>{J();var b=G();P(()=>d(b,e(pe))),i(W,b)},$$slots:{default:!0}})});var Q=f(F,2);z(Q,()=>Fe,(C,R)=>{R(C,{class:"max-h-[256px] overflow-y-auto",children:(W,ie)=>{var b=me(),te=S(b);se(te,17,()=>Y,re,(_e,ce)=>{var ue=me(),xe=S(ue);z(xe,()=>We,($e,ke)=>{ke($e,{get value(){return e(ce).value},get label(){return e(ce).label}})}),i(_e,ue)}),i(W,b)},$$slots:{default:!0}})}),i(k,j)},$$slots:{default:!0}})});var ee=f(M,2);{var c=r=>{Ae(r,{class:"my-1 h-8 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3"})},h=r=>{oe(r,{variant:"outline",class:"my-1 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:async()=>await ge(),children:($,k)=>{J();var T=G();P(()=>d(T,v()==="ru"?"Сканировать":"Fetch")),i($,T)},$$slots:{default:!0}})};ae(ee,r=>{e(_)==="loading"?r(c):r(h,!1)})}P(()=>{d(g,v()==="ru"?`Эта страница нужна для просмотра всех "${e(p)}" и их упоминаний в расписании.`:`This page is needed to view all "${e(p)}" and their mentions in the schedule.`),d(x,v()==="ru"?`После сканирования будет доступен список всех "${e(p)}", при нажатии на них будет открыт список их упоминаний, а по нажатию на упоминания будет открыта новая вкладка с таблицей рассписания на нужной ячейки.`:`After scanning, a list of all "${e(p)}" will be available, and clicking on them will open a list of their mentions, and clicking on mentions will open a new tab with tables of schedules on the necessary cells.`),d(I,v()==="ru"?"Просьба не злоупотреблять сканированием, поскольку на 1 сканирование уходят 4 api запроса, и если вы оказались здесь случайно - просьба покинуть страницу и сделать вид что ничего не было.":"Please do not abuse scanning, as 1 scan consumes 4 api requests, and if you happen to be here by chance - leave the page and make it look like nothing happened."),d(H,v()==="ru"?"Для повторного сканирования - перезагрузите страницу.":"For a repeated scan - reload the page.")}),i(l,t)},we=l=>{var t=Ue(),s=S(t);se(s,21,()=>Object.entries(L).filter(([a,x])=>a.toLowerCase().split(" ").some(o=>o.startsWith(e(X).toLowerCase()))).sort((a,x)=>a[0].localeCompare(x[0])),re,(a,x)=>{let o=()=>e(x)[0],I=()=>e(x)[1];var O=Ne(),H=S(O);oe(H,{variant:"outline",class:"mb-0.5 w-full min-w-[256px] font-semibold md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:()=>{V[o()]=!V[o()],setTimeout(()=>{var c,h;(c=document.getElementById(o()))==null||c.focus(),(h=document.getElementById(o()))==null||h.blur()},250)},children:(c,h)=>{J();var r=G();P($=>d(r,$),[()=>o().replace(/\ /g,"_")]),i(c,r)},$$slots:{default:!0}});var M=f(H,2);{var ee=c=>{var h=Ke(),r=S(h),$=y(r,!0);m(r);var k=f(r,2);se(k,21,I,re,(T,j)=>{let F=()=>e(j).year,Q=()=>e(j).col,C=()=>e(j).row;const R=le(()=>Me(F(),C()+1,Q()+1));oe(T,{variant:"ghost",target:"_blank",get href(){return e(R)},children:(W,ie)=>{J();var b=G();P(te=>d(b,`${F()??""}-${te??""}/${C()+1}`),[()=>He(Q()+1)]),i(W,b)},$$slots:{default:!0}})}),m(k),P(()=>{Le(r,"id",o()),d($,o())}),i(c,h)};ae(M,c=>{V[o()]&&c(ee)})}i(a,O)}),m(s);var n=f(s,2);const g=le(()=>v()==="ru"?"Поиск (По одному из слов содержащихся в имени)":"Search (By one of the words contained in the name)");ze(n,{type:"text",get placeholder(){return e(g)},class:"fixed bottom-14 w-full min-w-[256px] bg-muted p-4 shadow-2xl md:w-2/3 lg:w-1/2 2xl:w-1/3",get value(){return e(X)},set value(a){B(X,A(a))}}),i(l,t)};ae(he,l=>{Object.keys(L).length>0?l(we,!1):l(be)})}m(Z),i(N,Z),ve(),U()}export{tt as component};
