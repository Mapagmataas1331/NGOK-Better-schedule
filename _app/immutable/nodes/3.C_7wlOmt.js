import{p as le,b as he,a as n,t as y,r as be,s as _e,c as H,i as se,d as M,e as Q,f as re,g as d,h as we}from"../chunks/disclose-version.Da48tKRF.js";import{p as ie,t as k,b as ce,f as x,c as m,g as t,d as oe,e as ne,h as $,i as z,r as v,j as X}from"../chunks/utils.Dyn2-BR2.js";import{r as xe,s as $e,c as ke,e as Y,B as Z,i as I,a as ye,l as Pe}from"../chunks/popper-layer-force-mount.Be-LmI6K.js";import{b as Se,R as Ee,S as qe,a as je,c as Ce}from"../chunks/index.wgxkhTys.js";import{f as Be,c as Le,b as Oe}from"../chunks/fetchTableData.JhWmgOXU.js";var Te=y("<input>");function Fe(G,_){ie(_,!0);let T=le(_,"ref",15,null),f=le(_,"value",15),C=be(_,["$$slots","$$events","$$legacy","ref","value","class"]);var i=Te();xe(i);let P;he(i,B=>T(B),()=>T()),k(()=>P=$e(i,P,{class:ke("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",_.class),...C})),Se(i,f),n(G,i),ce()}var Re=y("<!> <!>",1),We=y('<div class="mb-4 w-full min-w-[256px] p-4 md:w-2/3 lg:w-1/2 2xl:w-1/3"><h2 class="mb-4 text-center text-lg font-semibold md:text-2xl"> </h2> <p class="mb-1 text-sm md:text-lg"> </p> <blockquote class="mb-1 text-sm italic md:text-lg"> </blockquote> <blockquote class="text-sm italic md:text-lg"> </blockquote></div> <!> <!>',1),Ae=y('<p class="w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3" lang="ru" spellcheck="" contenteditable=""> </p> <div class="mb-2 grid w-full min-w-[256px] grid-cols-3 border-l-2 md:w-2/3 md:grid-cols-6 lg:w-1/2 2xl:w-1/3"></div>',1),De=y("<!> <!>",1),He=y('<div class="mb-10 flex w-full flex-col items-center"></div> <!>',1),Me=y('<div class="mx-auto flex min-h-[calc(100dvh_-_3.5rem)] w-full flex-col items-center justify-center bg-gradient-to-br from-white to-sky-200 px-2 py-2 dark:from-sky-800 dark:to-black md:min-h-[calc(100dvh_-_4rem)]"><!></div>');function Ne(G,_){ie(_,!0);const T=_e(),f=()=>we(Pe,"$language",T),C={},i=H({}),P=H({});let B=ne("");const J=[{value:"дни",label:"Дни"},{value:"часы",label:"Часы"},{value:"дисциплины",label:"Дисциплины"},{value:"преподаватели",label:"Преподаватели"},{value:"ауд.",label:"Ауд"}];let p=ne("преподаватели");const ue=X(()=>{var r;return((r=J.find(e=>e.value===t(p)))==null?void 0:r.label)??"Select a fruit"}),ee=[];ee.push(...J.map(r=>r.value));const de=async()=>{const r={};for(let e=1;e<=4;(e+=1)-1){const l=await Be(String(e));if(l.scheduleError||!l.schedule)return;C[e]=l.schedule}Object.entries(C).forEach(([e,l])=>{l[1].forEach((o,g)=>{o.toLowerCase()===t(p)&&(r[e]||(r[e]=[]),r[e].push(g))})}),Object.entries(C).forEach(([e,l])=>{l.forEach((o,g)=>{r[e].forEach(a=>{g!=0&&o[a]&&!ee.includes(o[a].toLowerCase())&&(i[o[a]]||(i[o[a]]=[]),i[o[a]].push({year:e,col:a,row:g}))})})})};var K=Me(),me=$(K);se(me,()=>!(Object.keys(i).length>0),r=>{var e=We(),l=x(e),o=$(l),g=$(o,!0);v(o);var a=m(o,2),w=$(a,!0);v(a);var s=m(a,2),N=$(s,!0);v(s);var L=m(s,2),F=$(L,!0);v(L),v(l);var R=m(l,2);M(R,()=>Ee,(c,u)=>{u(c,{type:"single",name:"groupSelect",get value(){return t(p)},set value(b){oe(p,H(b))},children:(b,U)=>{var W=Re(),S=x(W);M(S,()=>qe,(E,q)=>{q(E,{class:"my-1 w-full min-w-[256px] bg-background shadow-md md:w-2/3 lg:w-1/2 2xl:w-1/3",children:(O,V)=>{z();var j=Q();k(()=>d(j,t(ue))),n(O,j)},$$slots:{default:!0}})});var A=m(S,2);M(A,()=>je,(E,q)=>{q(E,{class:"max-h-[256px] overflow-y-auto",children:(O,V)=>{var j=re(),D=x(j);Y(D,17,()=>J,I,(ve,te)=>{var ae=re(),fe=x(ae);M(fe,()=>Ce,(pe,ge)=>{ge(pe,{get value(){return t(te).value},get label(){return t(te).label}})}),n(ve,ae)}),n(O,j)},$$slots:{default:!0}})}),n(b,W)},$$slots:{default:!0}})});var h=m(R,2);Z(h,{variant:"outline",class:"my-1 w-full min-w-[256px] md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:async()=>await de(),children:(c,u)=>{z();var b=Q();k(()=>d(b,f()==="ru"?"Сканировать":"Fetch")),n(c,b)},$$slots:{default:!0}}),k(()=>{d(g,f()==="ru"?`Эта страница нужна для просмотра всех "${t(p)}" и их упоминаний в расписании.`:`This page is needed to view all "${t(p)}" and their mentions in the schedule.`),d(w,f()==="ru"?`После сканирования будет доступен список всех "${t(p)}", при нажатии на них будет открыт список их упоминаний, а по нажатию на упоминания будет открыта новая вкладка с таблицей рассписания на нужной ячейки.`:`After scanning, a list of all "${t(p)}" will be available, and clicking on them will open a list of their mentions, and clicking on mentions will open a new tab with tables of schedules on the necessary cells.`),d(N,f()==="ru"?"Просьба не злоупотреблять сканированием, поскольку на 1 сканирование уходят 4 api запроса, и если вы оказались здесь случайно - просьба покинуть страницу и сделать вид что ничего не было.":"Please do not abuse scanning, as 1 scan consumes 4 api requests, and if you happen to be here by chance - leave the page and make it look like nothing happened."),d(F,f()==="ru"?"Для повторного сканирования - перезагрузите страницу.":"For a repeated scan - reload the page.")}),n(r,e)},r=>{var e=He(),l=x(e);Y(l,21,()=>Object.entries(i).filter(([a,w])=>a.toLowerCase().split(" ").some(s=>s.startsWith(t(B).toLowerCase()))).sort((a,w)=>a[0].localeCompare(w[0])),I,(a,w)=>{let s=()=>t(w)[0],N=()=>t(w)[1];var L=De(),F=x(L);Z(F,{variant:"outline",class:"mb-0.5 w-full min-w-[256px] font-semibold md:w-2/3 lg:w-1/2 2xl:w-1/3",onclick:()=>{P[s()]=!P[s()],setTimeout(()=>{var h,c;(h=document.getElementById(s()))==null||h.focus(),(c=document.getElementById(s()))==null||c.blur()},250)},children:(h,c)=>{z();var u=Q();k(()=>d(u,s().replace(/\ /g,"_"))),n(h,u)},$$slots:{default:!0}});var R=m(F,2);se(R,()=>P[s()],h=>{var c=Ae(),u=x(c),b=$(u,!0);v(u);var U=m(u,2);Y(U,21,N,I,(W,S)=>{let A=()=>t(S).year,E=()=>t(S).col,q=()=>t(S).row;var O=X(()=>Oe(A(),q()+1,E()+1));Z(W,{variant:"ghost",target:"_blank",get href(){return t(O)},children:(V,j)=>{z();var D=Q();k(()=>d(D,`${A()??""}-${Le(E()+1)??""}/${q()+1}`)),n(V,D)},$$slots:{default:!0}})}),v(U),k(()=>{ye(u,"id",s()),d(b,s())}),n(h,c)}),n(a,L)}),v(l);var o=m(l,2),g=X(()=>f()==="ru"?"Поиск (По одному из слов содержащихся в имени)":"Search (By one of the words contained in the name)");Fe(o,{type:"text",get placeholder(){return t(g)},class:"fixed bottom-14 w-full min-w-[256px] bg-muted p-4 shadow-2xl md:w-2/3 lg:w-1/2 2xl:w-1/3",get value(){return t(B)},set value(a){oe(B,H(a))}}),n(r,e)}),v(K),n(G,K),ce()}export{Ne as component};
